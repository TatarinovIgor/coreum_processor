identity:
  default_schema_id: default
  schemas:
    - id: default
      url: file:///config/identity.json
courier:
  smtp:
    connection_uri: smtp://AKIAWRBL5L5H26DLA46Z:BKSRtpMDK4jxPTdrkKm78m5gPC6HB%2FTf3JwqWVHJBTFH@email-smtp.us-east-1.amazonaws.com:587/
    from_address: igor.tatarinov@birdhouse.technology
    from_name: Birdhouse

selfservice:
  default_browser_return_url: https://127.0.0.1:9000/ui/dashboard
  methods:
    password:
      enabled: true
    link:
      enabled: true
      config:
        lifespan: 15m
  flows:
    login:
      ui_url: https://127.0.0.1:9000/login
      after:
        hooks: [ ] # These actions are executed only if no more specific hooks in the `password` or `oidc` sections are defined
        password:
          # Actions in this section will be executed after registration (or login, settings) with a password
          hooks:
            - hook: web_hook
              config:
                url: http://host.docker.internal:9000/kratos/login-user
                method: POST
                body: base64://ZnVuY3Rpb24oY3R4KSB7CiAgdXNlcklkOiBjdHguaWRlbnRpdHkuaWQsCiAgdHJhaXRzOiB7CiAgICBlbWFpbDogY3R4LmlkZW50aXR5LnRyYWl0cy5lbWFpbAogIH0sCn0=
                response:
                  ignore: false
                auth:
                  type: api_key
                  config:
                    name: Authorization
                    value: "webhook-regi-api_key"
                    in: header
    registration:
      ui_url: https://127.0.0.1:9000/register
      after:
        hooks: [] # These actions are executed only if no more specific hooks in the `password` or `oidc` sections are defined
        password:
          # Actions in this section will be executed after registration (or login, settings) with a password
          hooks:
            - hook: web_hook
              config:
                url: http://host.docker.internal:9000/kratos/create-user
                method: POST
                body: base64://ZnVuY3Rpb24oY3R4KSB7CiAgdXNlcklkOiBjdHguaWRlbnRpdHkuaWQsCiAgdHJhaXRzOiB7CiAgICBlbWFpbDogY3R4LmlkZW50aXR5LnRyYWl0cy5lbWFpbAogIH0sCn0=
                response:
                  ignore: false
                auth:
                  type: api_key
                  config:
                    name: Authorization
                    value: "webhook-regi-api_key"
                    in: header

    verification:
      enabled: true
      ui_url: https://127.0.0.1:9000/verification
      use: link
      notify_unknown_recipients: true
    recovery:
      enabled: true
      lifespan: 15m
      use: link
      notify_unknown_recipients: true
      ui_url: https://127.0.0.1:9000/recovery
    settings:
      ui_url: https://127.0.0.1:9000/settings
    error:
      ui_url: https://127.0.0.1:9000/error

serve:
  public:
    cors:
      enabled: false
      allowed_origins:
        - "*"
      allowed_methods:
        - POST
        - GET
        - PUT
        - PATCH
        - DELETE
        - OPTIONS
      allowed_headers:
        - Origin
        - Authorization
        - Content-Type
      exposed_headers:
        - Content-Type
        - Origin
      allow_credentials: true
      debug: true
    port: 4433
    base_url: https://127.0.0.1:9000/
  admin:
    port: 4434
    base_url: https://127.0.0.1:9000/
cookies:
  domain: 127.0.0.1:9000
  same_site: None